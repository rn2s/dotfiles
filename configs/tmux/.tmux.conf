# ====================================================
# 1. プレフィックスキー設定: Ctrl-o (C-o) を採用
# ----------------------------------------------------
# プレフィックスキーを Ctrl-o に設定
set -g prefix C-o
# デフォルトの Ctrl-b のバインドを解除
unbind C-b
# Ctrl-o を2回押すと、Ctrl-o がそのまま送信されるように設定
bind C-o send-prefix

# ====================================================
# 2. Emacs準拠型キーバインドの設定 (操作モードと衝突解除)
# ----------------------------------------------------
# tmuxの操作モード (コマンド、コピー) をEmacs準拠にする
set -g status-keys emacs
set -g mode-keys emacs

# コピーモードでのキーバインド衝突の解除 (最重要: Emacsキーをシェルに渡す)
# この設定により、C-p, C-n, C-a, C-e, C-s, C-r がシェル内で履歴移動や検索として機能します。
unbind-key -T copy-mode C-p # シェルの履歴移動 (Previous) 用
unbind-key -T copy-mode C-n # シェルの履歴移動 (Next) 用
unbind-key -T copy-mode C-a # 行頭移動 (All) 用
unbind-key -T copy-mode C-e # 行末移動 (End) 用
unbind-key -T copy-mode C-s # 検索 (Search) 用
unbind-key -T copy-mode C-r # 逆順検索 (Reverse Search) 用

# ====================================================
# 3. 操作性向上のための追加設定 (推奨)
# ----------------------------------------------------
# マウス操作の有効化 (ペイン選択、サイズ変更、スクロールが可能に)
set -g mouse on

# 分割キーの変更 (より直感的に)
# C-o | で縦分割、C-o - で横分割
bind | split-window -h
bind - split-window -v
unbind %
unbind '"'

# 設定ファイルを再読み込みするためのキーバインド (設定変更後、Prefix + r で反映)
# C-o r で設定を再読み込みできます。
bind r source-file ~/.tmux.conf \; display-message "tmux.conf reloaded"
